let enti=[],ambiente;const colori=[['rgba(255, 0, 104, 0.5)','rgba(255, 199, 0, 0.5)','rgba(255, 112, 0, 0.5)','rgba(148, 255, 0, 0.5)','rgba(174, 0, 255, 0.5)','rgba(132, 114, 140, 0.5)','rgba(63, 184, 191, 0.25)','rgba(63, 99, 191, 0.5)']];let colore,G=1;const maxSplice=100,eMin=0.05,eMax=5;function setup(){createCanvas(windowWidth,windowHeight),colore=random(colori)}class Ente{constructor(a,b,c){function g(){ceil(l)<=o?clearInterval(s):l-=q*(l-o)}this.massa=a,this.posizione=createVector(b,c),this.velocità=createVector(0,0),this.accelerazione=createVector(0,0);let h=random(colore);const k=20;var l=0,o=a,p=o*1.5,q=0.05,r=setInterval(function(){ceil(l)>=p?(clearInterval(r),s=setInterval(g,k)):l+=q*(p-l)},k),s;this.vedi=function(){noStroke(),fill(h),ellipse(this.posizione.x,this.posizione.y,16*l,16*l)}}applicaForza(a){let b=p5.Vector.div(a,this.massa);this.accelerazione.add(b)}aggiorna(){this.velocità.add(this.accelerazione),this.posizione.add(this.velocità),this.accelerazione.mult(0)}calcolaAttrazionne(a){let b=p5.Vector.sub(this.posizione,a.posizione),c=b.mag();c=constrain(c,25,100),b.normalize();let d=G*this.massa*a.massa/(c*c);return b.mult(d),b}checkBordi(){const a=750;this.posizione.x>width+a?(this.posizione.x=width+a,this.velocità.x*=-1):this.posizione.x<-a&&(this.velocità.x*=-1,this.posizione.x=-a),this.posizione.y>height+a?(this.velocità.y*=-1,this.posizione.y=height+a):this.posizione.y<-a&&(this.velocità.y*=-1,this.posizione.y=-a)}}function draw(){clear(),background(255);for(let a=0;a<enti.length;a++)enti[a].vedi();for(let a=0;a<enti.length;a++){for(let b=0;b<enti.length;b++)if(a!==b){let c=enti[b].calcolaAttrazionne(enti[a]);enti[a].applicaForza(c)}enti[a].aggiorna(),enti[a].checkBordi()}enti.length>maxSplice&&enti.splice(0,1)}ambiente=setInterval(spazio,5e3);function spazio(){var a=random(width),b=random(height),c=random(eMin,eMax),d=new Ente(c,a,b);enti.push(d),enti.length>=maxSplice&&enti.splice(0,1)}function windowResized(){resizeCanvas(windowWidth,windowHeight)}function mousePressed(){var a=new Ente(random(eMin,eMax),mouseX,mouseY);enti.push(a)}function mouseDragged(){var a=new Ente(random(eMin,eMax),mouseX,mouseY);enti.push(a)}